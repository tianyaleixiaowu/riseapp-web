(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00d1d59d"],{"07b6":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pic upload"},[i("div",{staticClass:"picTop"},[i("span",[e._v(e._s(e.label))]),i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),i("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:e.fileChange}})])])],1),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.imageList.length>0,expression:"imageList.length > 0"}],staticClass:"list"},e._l(e.imageList,function(t,a){return i("li",{key:a},[i("div",[e._v("链接地址："),i("a",{attrs:{href:t,target:"_blank"}},[e._v(e._s(t))])]),i("div",{on:{click:function(i){e.del(t,a)}}},[e._v("删除")])])}),0)])},n=[],l=(i("28a5"),i("cadf"),i("551c"),i("097d"),i("fc37")),u={props:["label","defaultValue"],data:function(){return{imageList:[],loading:!1}},methods:{fileChange:function(e){var t=this;this.loading=!0,Object(l["b"])(e,function(e){t.loading=!1,t.imageList.unshift(e.url)})},del:function(e,t){var i=this.imageList.filter(function(t){return e!==t});this.imageList=i},getData:function(){var e=this.imageList.join(",");return e}},watch:{defaultValue:function(){this.imageList=this.defaultValue.split(",")}}},r=u,s=(i("ae01"),i("2877")),d=Object(s["a"])(r,a,n,!1,null,null,null);d.options.__file="picupload.vue";t["a"]=d.exports},"1de4":function(e,t,i){},"28a5":function(e,t,i){"use strict";var a=i("aae3"),n=i("cb7c"),l=i("ebd6"),u=i("0390"),r=i("9def"),s=i("5f1b"),d=i("520a"),o=Math.min,c=[].push,f="split",p="length",h="lastIndex",g=!!function(){try{return new RegExp("x","y")}catch(e){}}();i("214f")("split",2,function(e,t,i,v){var m;return m="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(n,e,t);var l,u,r,s=[],o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,o+"g");while(l=d.call(v,n)){if(u=v[h],u>f&&(s.push(n.slice(f,l.index)),l[p]>1&&l.index<n[p]&&c.apply(s,l.slice(1)),r=l[0][p],f=u,s[p]>=g))break;v[h]===l.index&&v[h]++}return f===n[p]?!r&&v.test("")||s.push(""):s.push(n.slice(f)),s[p]>g?s.slice(0,g):s}:"0"[f](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,a){var n=e(this),l=void 0==i?void 0:i[t];return void 0!==l?l.call(i,n,a):m.call(String(n),i,a)},function(e,t){var a=v(m,e,this,t,m!==i);if(a.done)return a.value;var d=n(e),c=String(this),f=l(d,RegExp),p=d.unicode,h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),b=new f(g?d:"^(?:"+d.source+")",h),y=void 0===t?4294967295:t>>>0;if(0===y)return[];if(0===c.length)return null===s(b,c)?[c]:[];var x=0,_=0,V=[];while(_<c.length){b.lastIndex=g?_:0;var k,C=s(b,g?c:c.slice(_));if(null===C||(k=o(r(b.lastIndex+(g?0:_)),c.length))===x)_=u(c,_,p);else{if(V.push(c.slice(x,_)),V.length===y)return V;for(var w=1;w<=C.length-1;w++)if(V.push(C[w]),V.length===y)return V;_=x=k}}return V.push(c.slice(x)),V}]})},3846:function(e,t,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"3dcc":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticClass:"rise x add"},[i("div",{staticClass:"title"},[e._v(e._s(e.header))]),i("div",{staticClass:"content"},[e._l(e.data,function(t,a){return i("div",{key:a,staticClass:"item"},[i("span",[e._v(e._s(t.name))]),t.type?e._e():i("div",["title"===t.module?i("el-input",{attrs:{placeholder:t.placeholder},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}):e._e()],1),"select"===t.type?i("div",["type"===t.module?i("el-select",{attrs:{placeholder:"全部"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(t.options,function(e){return i("el-option",{key:e.id,attrs:{label:e.dValue,value:e.id}})}),1):e._e()],1):e._e()])}),i("mediaupload",{ref:"mediaup",staticStyle:{marginBottom:"15px"},attrs:{label:"音视频上传：",defaultValue:e.mediaDefault}}),i("picupload",{ref:"picup",attrs:{label:"背景图上传：",defaultValue:e.picDefault}}),i("div",{staticClass:"item"},[i("span",[e._v("媒体介绍：")]),i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入媒体介绍"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],2),i("div",{staticClass:"btn-list"},[i("el-button",{staticClass:"btn",on:{click:function(t){e.cancle()}}},[e._v("取消")]),i("el-button",{staticClass:"btn",on:{click:function(t){e.save()}}},[e._v("保存")])],1)])])},n=[],l=(i("b383"),i("3ebc")),u=i("07b6"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pic upload"},[i("div",{staticClass:"picTop"},[i("span",[e._v(e._s(e.label))]),e.imageList.length>0?i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("label",{staticClass:"el-icon-plus avatar-uploader-icon"})])]):e._e(),e.imageList.length<1?i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"mediaUp"}}),i("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"mediaUp"},on:{change:e.fileChange}})])]):e._e()],1),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.imageList.length>0,expression:"imageList.length > 0"}],staticClass:"list"},e._l(e.imageList,function(t,a){return i("li",{key:a},[i("div",[e._v("链接地址："),i("a",{attrs:{href:t,target:"_blank"}},[e._v(e._s(t))])]),i("div",{on:{click:function(i){e.del(t,a)}}},[e._v("删除")])])}),0)])},s=[],d=(i("28a5"),i("cadf"),i("551c"),i("097d"),i("fc37")),o={props:["label","defaultValue"],data:function(){return{imageList:[],loading:!1}},methods:{fileChange:function(e){var t=this;this.loading=!0,Object(d["b"])(e,function(e){t.loading=!1,t.imageList.unshift(e.url)})},del:function(e,t){var i=this.imageList.filter(function(t){return e!==t});this.imageList=i},getData:function(){var e=this.imageList.join(",");return e}},watch:{defaultValue:function(){this.imageList=this.defaultValue.split(",")}}},c=o,f=(i("77dc"),i("2877")),p=Object(f["a"])(c,r,s,!1,null,null,null);p.options.__file="mediaupload.vue";var h=p.exports,g=["新建","编辑"],v=[{name:"媒体标题：",placeholder:"请输入媒体标题",module:"title"},{name:"媒体类型：",placeholder:"请选择媒体类型",module:"type",type:"select",options:l["f"]}],m={name:"add",data:function(){return{title:"",header:"",id:"",name:"",remark:"",type:"",types:"",mediaDefault:null,picDefault:null,data:v,loading:!1}},components:{Picupload:u["a"],Mediaupload:h},mounted:function(){this.dataInit()},methods:{dataInit:function(){var e=this.$route.query,t=e.type,i=e.id;if(this.types=t,this.id=i,"edit"!==t)return this.header=g[0];this.header=g[1],this.detailAjax()},editInit:function(e){var t=e.data,i=t.remark,a=t.title,n=t.pics,l=t.url,u=t.type;this.remark=i,this.title=a,this.type=u,this.picDefault=n,this.mediaDefault=l},detailAjax:function(){var e=this;this.loading=!0,this.api.get("/media/".concat(this.id)).then(function(t){e.loading=!1,e.editInit(t)}).catch(function(t){console.log(t),e.loading=!1,e.$message(t.message)})},editAjax:function(){var e=this,t={remark:this.remark,title:this.title,type:this.type};t.pics=this.$refs.picup.getData(),t.url=this.$refs.mediaup.getData();var i=["post","put"],a=i[0];"edit"===this.types&&(t.id=this.id,a=i[1]),this.loading=!0,this.api[a]("/media",t,"form").then(function(t){e.loading=!1,e.$router.go(-1)}).catch(function(t){e.loading=!1,console.log(t),e.$message(t.message)})},save:function(){this.editAjax()},cancle:function(){this.$router.go(-1)}}},b=m,y=(i("92c9"),Object(f["a"])(b,a,n,!1,null,"27958fb9",null));y.options.__file="add.vue";t["default"]=y.exports},"3ebc":function(e,t,i){"use strict";i.d(t,"c",function(){return n}),i.d(t,"g",function(){return r}),i.d(t,"f",function(){return s}),i.d(t,"d",function(){return l}),i.d(t,"b",function(){return u}),i.d(t,"e",function(){return d}),i.d(t,"a",function(){return o}),i.d(t,"h",function(){return c}),i.d(t,"i",function(){return f});i("7f7f"),i("2ef0");var a=i("7c15");function n(e,t,i){return a["a"].get("/role").then(function(a){var n=a.data.map(function(e){var t={id:e.id,dKey:e.id,dValue:e.sign};return t});if("filter"!=t&&n.unshift({id:"",dKey:"",dValue:"全部"}),"less"===i){var l=["超级管理员","学员"];n=n.filter(function(e){return-1==l.indexOf(e.dValue)})}return e&&e(n),a.data}).catch(function(e){console.log(e)}),[]}function l(e,t){a["a"].get("/school").then(function(i){var a=i.data.map(function(e){var t={id:e.id,dKey:e.id,dValue:e.name};return t});return"filter"!=t&&a.unshift({id:"",dKey:"",dValue:"全部"}),e&&e(a),i.data}).catch(function(e){console.log(e)})}function u(e,t){a["a"].get("/class").then(function(i){var a=i.data.map(function(e){var t={id:e.id,dKey:e.id,dValue:e.name};return t});return"filter"!=t&&a.unshift({id:"",dKey:"",dValue:"全部"}),e&&e(a),i.data}).catch(function(e){console.log(e)})}var r=[{id:-1,dKey:"",dValue:"全部"},{id:0,dKey:0,dValue:"未发货"},{id:1,dKey:1,dValue:"已发货"}],s=[{id:-1,dKey:"",dValue:"全部"},{id:1,dKey:1,dValue:"音频"},{id:2,dKey:2,dValue:"视频"}],d=[{id:-1,dKey:"",dValue:"全部"},{id:0,dKey:0,dValue:"已邀请"},{id:1,dKey:1,dValue:"未邀请"}],o=[{id:-1,dKey:"",dValue:"全部"},{id:0,dKey:0,dValue:"已成交"},{id:1,dKey:1,dValue:"未成交"}],c=[{id:0,dKey:0,dValue:"选择题"},{id:1,dKey:1,dValue:"问答题"}],f=[{id:0,dKey:"A",dValue:"A"},{id:1,dKey:"B",dValue:"B"},{id:2,dKey:"C",dValue:"C"},{id:3,dKey:"D",dValue:"D"},{id:4,dKey:"E",dValue:"E"},{id:5,dKey:"F",dValue:"F"},{id:6,dKey:"G",dValue:"G"},{id:7,dKey:"H",dValue:"H"},{id:8,dKey:"I",dValue:"I"}]},"58c9":function(e,t,i){},"5d6b":function(e,t,i){var a=i("e53d").parseInt,n=i("a1ce").trim,l=i("e692"),u=/^[-+]?0[xX]/;e.exports=8!==a(l+"08")||22!==a(l+"0x16")?function(e,t){var i=n(String(e),3);return a(i,t>>>0||(u.test(i)?16:10))}:a},"67dd":function(e,t,i){},"6b54":function(e,t,i){"use strict";i("3846");var a=i("cb7c"),n=i("0bfb"),l=i("9e1e"),u="toString",r=/./[u],s=function(e){i("2aba")(RegExp.prototype,u,e,!0)};i("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?s(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!l&&e instanceof RegExp?n.call(e):void 0)}):r.name!=u&&s(function(){return r.call(this)})},7445:function(e,t,i){var a=i("63b6"),n=i("5d6b");a(a.G+a.F*(parseInt!=n),{parseInt:n})},"77dc":function(e,t,i){"use strict";var a=i("1de4"),n=i.n(a);n.a},"92c9":function(e,t,i){"use strict";var a=i("58c9"),n=i.n(a);n.a},a1ce:function(e,t,i){var a=i("63b6"),n=i("25eb"),l=i("294c"),u=i("e692"),r="["+u+"]",s="​",d=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),c=function(e,t,i){var n={},r=l(function(){return!!u[e]()||s[e]()!=s}),d=n[e]=r?t(f):u[e];i&&(n[i]=d),a(a.P+a.F*r,"String",n)},f=c.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(o,"")),e};e.exports=c},aae3:function(e,t,i){var a=i("d3f4"),n=i("2d95"),l=i("2b4c")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==n(e))}},ae01:function(e,t,i){"use strict";var a=i("67dd"),n=i.n(a);n.a},b9e9:function(e,t,i){i("7445"),e.exports=i("584a").parseInt},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,i){e.exports=i("b9e9")},fc37:function(e,t,i){"use strict";i.d(t,"c",function(){return r}),i.d(t,"a",function(){return s}),i.d(t,"b",function(){return d});i("7f7f"),i("6b54"),i("28a5");var a=i("e814"),n=i.n(a),l=(i("2ef0"),i("bc3a")),u=i.n(l);function r(e){if(!e)return"";var t=new Date(e).getFullYear(),i=new Date(e).getMonth()+1,a=new Date(e).getDate();return i<10&&(i="0"+n()(i)),a<10&&(a="0"+n()(a)),"".concat(t,"-").concat(i,"-").concat(a)}function s(e){if(!e)return"";var t=new Date(e).getTime();return"".concat(t)}function d(e,t){if(e){var i=e.target.files[0];if(i){var a=new FormData;a.append("chunk","0"),a.append("chunks","1"),a.append("file",i,i.name);var n={headers:{"Content-Type":"multipart/form-data"}};u.a.get("/login/qiniu/token").then(function(e){var i=e.data.data;a.append("token",i),o(a,n,t)})}}}function o(e,t,i){u.a.post("http://upload-z1.qiniup.com/",e,t).then(function(e){var t={message:"ok",url:"http://qiniu.tianyalei.com/".concat(e.data.key)};i&&i(t)}).catch(function(e){console.log(e,"pppp")})}}}]);
//# sourceMappingURL=chunk-00d1d59d.c378075f.js.map